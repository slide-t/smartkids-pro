<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartKids Pro | Keyboard Tutor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .word {
      transition: all 0.5s ease-in-out;
      opacity: 0;
      transform: translateY(-20px);
    }
    .word.show {
      opacity: 1;
      transform: translateY(0);
    }
    .key {
      width: 2.5rem;
      height: 2.5rem;
      margin: 0.2rem;
      background-color: #1e293b;
      color: white;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .key.active {
      background-color: #3b82f6;
      transform: scale(1.05);
    }
    #progressBar {
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex flex-col items-center p-4">

  <h1 class="text-2xl font-bold mb-4">SmartKids Pro - Keyboard Tutor</h1>

  <div class="w-full max-w-2xl mb-4">
    <div class="flex justify-between text-sm text-gray-300">
      <span>‚è±Ô∏è Time: <span id="timeDisplay">30s</span></span>
      <span>üî• WPM: <span id="wpm">0</span></span>
      <span>‚≠ê Score: <span id="score">0</span></span>
    </div>
    <div class="h-2 bg-gray-700 rounded mt-2">
      <div id="progressBar" class="h-2 bg-blue-500 w-full rounded"></div>
    </div>
  </div>

  <!-- Word Display -->
  <div id="wordDisplay" class="text-3xl font-bold mb-6 text-center"></div>

  <!-- Input area -->
  <input 
    id="userInput" 
    type="text" 
    class="p-2 w-64 text-black text-center rounded focus:outline-none" 
    placeholder="Type the word here..."
    autocomplete="off"
  />

  <!-- Virtual Keyboard -->
  <div id="keyboard" class="p-4 mt-6 bg-slate-800 rounded-xl shadow-lg text-center"></div>

  <!-- Background music toggle -->
  <button id="toggleMusic" class="mt-6 bg-blue-600 px-4 py-2 rounded hover:bg-blue-500">
    üîä Toggle Music
  </button>

  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/03/03/audio_2e540b31a2.mp3?filename=childrens-fun-144044.mp3" type="audio/mp3">
  </audio>

  <script>
    const wordDisplay = document.getElementById("wordDisplay");
    const userInput = document.getElementById("userInput");
    const scoreDisplay = document.getElementById("score");
    const wpmDisplay = document.getElementById("wpm");
    const progressBar = document.getElementById("progressBar");
    const timeDisplay = document.getElementById("timeDisplay");
    const bgMusic = document.getElementById("bgMusic");

    // Local dictionary (extend later via JSON)
    const wordsByYear = {
      1: ["cat", "dog", "sun", "hat", "cup", "pen", "fan", "boy", "run", "bat"],
      2: ["tree", "book", "door", "milk", "bird", "rain", "lamp", "fish", "desk", "frog"],
      3: ["happy", "school", "garden", "pencil", "yellow", "bottle", "purple", "circle", "friend"],
      4: ["elephant", "football", "computer", "mountain", "teacher", "holiday", "writing"],
      5: ["knowledge", "learning", "practice", "beautiful", "building", "language"],
      6: ["discipline", "education", "motivation", "excellence"],
      7: ["A stitch in time saves nine.", "Practice makes perfect."],
      8: ["Honesty is the best policy.", "Actions speak louder than words."],
      9: ["A journey of a thousand miles begins with a step."],
      10: ["Better late than never.", "The early bird catches the worm."],
      11: ["Success comes to those who work hard and stay humble."],
      12: ["Perseverance is the key to success and personal growth."]
    };

    let currentYear = 1;
    let currentWords = [];
    let currentIndex = 0;
    let score = 0;
    let startTime, timerInterval, timeLeft = 30;
    let totalTyped = 0;

    function initGame(year = 1) {
      currentYear = year;
      currentWords = [...wordsByYear[year]];
      currentIndex = 0;
      score = 0;
      totalTyped = 0;
      nextWord();
    }

    function nextWord() {
      if (currentIndex >= currentWords.length) {
        alert("üéâ Level Complete!");
        clearInterval(timerInterval);
        return;
      }

      const word = currentWords[currentIndex];
      wordDisplay.textContent = word;
      wordDisplay.classList.add("word");
      setTimeout(() => wordDisplay.classList.add("show"), 100);

      userInput.value = "";
      timeLeft = 15 + Math.min(currentYear * 2, 30); // 15‚Äì30s
      updateTimer();
      clearInterval(timerInterval);
      timerInterval = setInterval(countdown, 1000);
    }

    function countdown() {
      timeLeft--;
      timeDisplay.textContent = timeLeft + "s";
      progressBar.style.width = (timeLeft / 30) * 100 + "%";

      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        alert("‚è∞ Time‚Äôs up! Try again.");
        nextWord();
      }
    }

    function updateTimer() {
      timeDisplay.textContent = timeLeft + "s";
      progressBar.style.width = (timeLeft / 30) * 100 + "%";
    }

    userInput.addEventListener("input", () => {
      const word = currentWords[currentIndex];
      totalTyped++;
      if (userInput.value.trim() === word) {
        score++;
        scoreDisplay.textContent = score;
        const wpm = Math.round((score / ((Date.now() - startTime) / 60000)) || 0);
        wpmDisplay.textContent = wpm;
        playSound("success");
        clearInterval(timerInterval);
        currentIndex++;
        setTimeout(nextWord, 800);
      }
    });

    function playSound(type) {
      const audio = new Audio(
        type === "success"
          ? "https://cdn.pixabay.com/download/audio/2022/03/15/audio_6d0f5d37e3.mp3?filename=success-1-6297.mp3"
          : "https://cdn.pixabay.com/download/audio/2022/03/15/audio_11b9da7d7d.mp3?filename=click-124467.mp3"
      );
      audio.play();
    }

    // Toggle background music
    document.getElementById("toggleMusic").addEventListener("click", () => {
      if (bgMusic.paused) {
        bgMusic.play();
      } else {
        bgMusic.pause();
      }
    });

    // Generate full virtual keyboard
    const keyboardContainer = document.getElementById("keyboard");
    const keys = "QWERTYUIOPASDFGHJKLZXCVBNM".split("");
    keys.forEach(k => {
      const keyDiv = document.createElement("div");
      keyDiv.className = "key inline-block";
      keyDiv.textContent = k;
      keyboardContainer.appendChild(keyDiv);
    });

    // Keyboard highlight
    document.addEventListener("keydown", e => {
      const key = e.key.toUpperCase();
      const el = [...document.querySelectorAll(".key")].find(k => k.textContent === key);
      if (el) {
        el.classList.add("active");
        playSound("click");
        setTimeout(() => el.classList.remove("active"), 200);
      }
    });

    // Start Game
    startTime = Date.now();
    initGame(1);
  </script>
</body>
</html>
